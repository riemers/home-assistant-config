sonos_say:
  alias: "Sonos TTS script"
  sequence:
    - service: media_player.sonos_snapshot
      data_template:
        entity_id: "{{ sonos_entity|default('media_player.keuken') }}"
#    - service: media_player.sonos_unjoin
#      data_template:
#        entity_id: "{{ sonos_entity|default('media_player.keuken') }}"
    - service: media_player.volume_set
      data_template:
        entity_id: "{{ sonos_entity|default('media_player.keuken') }}"
        volume_level: "{{ volume|default(0.5) }}"
    - service: tts.google_say
      data_template:
        entity_id: "{{ sonos_entity|default('media_player.keuken') }}"
        message: "{{ message|default('dit is een test') }}"
    - delay: "{{ delay|default('00:00:00') }}"
    - wait_template: "{{ is_state(sonos_entity|default('media_player.keuken'), 'playing') }}"
      timeout: '00:00:05'
    - service: media_player.sonos_restore
      data_template:
        entity_id: "{{ sonos_entity|default('media_player.keuken') }}"
        
        
        
